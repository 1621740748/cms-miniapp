(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-profile"],{"0315":function(t,e,i){function a(t){if("number"!==typeof t||t<0)return t;var e=parseInt(t/3600);t%=3600;var i=parseInt(t/60);t%=60;var a=t;return[e,i,a].map((function(t){return t=t.toString(),t[1]?t:"0"+t})).join(":")}function o(t,e){return"string"===typeof t&&"string"===typeof e&&(t=parseFloat(t),e=parseFloat(e)),t=t.toFixed(2),e=e.toFixed(2),{longitude:t.toString().split("."),latitude:e.toString().split(".")}}i("99af"),i("c975"),i("a15b"),i("d81d"),i("a434"),i("b680"),i("d3b7"),i("acd8"),i("e25e"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("1276");var n={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(t){var e="";for(var i in this.UNITS)if(t>=this.UNITS[i]){e=Math.floor(t/this.UNITS[i])+i+"前";break}return e||"刚刚"},format:function(t){var e=this.parse(t),i=Date.now()-e.getTime();if(i<this.UNITS["天"])return this.humanize(i);var a=function(t){return t<10?"0"+t:t};return e.getFullYear()+"/"+a(e.getMonth()+1)+"/"+a(e.getDay())+"-"+a(e.getHours())+":"+a(e.getMinutes())},parse:function(t){var e=t.split(/[^0-9]/);return new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5])}};function r(t){var e="";for(var i in t)e+="&"+i+"="+t[i];return e.substr(1)}function s(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)||"weibo"==t.match(/WeiBo/i)||(t.indexOf("mobile mqqbrowser")>-1||(t.indexOf("iphone")>-1||t.indexOf("mac")>-1)&&t.indexOf("qq")>-1)}function c(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,o=e.getDate();return"start"===t?i-=60:"end"===t&&(i+=2),a=a>9?a:"0"+a,o=o>9?o:"0"+o,"".concat(i,"-").concat(a,"-").concat(o)}function l(){return Math.round((new Date).getTime()/1e3)}function h(){return!0}Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.LTrim=function(){return this.replace(/(^\s*)/g,"")},String.prototype.RTrim=function(){return this.replace(/(\s*$)/g,"")},t.exports={formatTime:a,formatLocation:o,dateUtils:n,objectToUrlParams:r,isWechatOrQQ:s,getDate:c,getNowTime:l,isH5:h}},"0465":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"iconfont",props:{type:String}};e.default=a},"0699":function(t,e,i){var a=i("1c3b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("89e0d7de",a,!0,{sourceMap:!1,shadowMode:!1})},"0dd3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(t){uni.showToast({icon:"none",title:t})},o=function(t){var e=/^1\d{10}$/;return""==t?(a("请输入手机号码"),!1):!!e.test(t)||(a("手机号码格式不正确"),!1)},n=function(t){return""==t?(a("请输入昵称"),!1):t.length<2?(a("昵称太短了"),!1):!(t.length>32)||(a("昵称太长了"),!1)},r=function(t){return""==t?(a("请输入密码"),!1):!(t.length<6)||(a("密码长度不能小于6位"),!1)},s=function(t){return""==t?(a("请输入密新码"),!1):!(t.length<6)||(a("新密码长度不能小于6位"),!1)},c=function(t){var e=/^\d{4}$/;return""==t?(a("请输入验证码"),!1):!!e.test(t)||(a("验证码不正确"),!1)},l=function(t){var e=/^\d{15}|\d{18}$/;return""==t?(a("请输入身份证号码"),!1):!!e.test(t)||(a("身份证必须是15或18位数字"),!1)},h=function(t){var e=/^([1-9]{1})(\d{14}|\d{15}|\d{16}|\d{18})$/;return""==t?(a("请输入银行卡号"),!1):!!e.test(t)||(a("银行卡号格式不正确"),!1)},u={checkMobile:o,checkNickname:n,checkPassword:r,checkNewPassword:s,checkVerifyCode:c,checkIdCard:l,checkBankCard:h};e.default=u},"15f2":function(t,e,i){"use strict";i.r(e);var a=i("374b"),o=i("7eb8");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("f899");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"6a7b551e",null,!1,a["a"],r);e["default"]=c.exports},"1c3b":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.global-loading-container[data-v-be07bb24]{position:fixed;top:0;left:0;right:0;bottom:0;background:hsla(0,0%,100%,.5)}.global-loading-container.global-loading-mask[data-v-be07bb24]{background:#fff}.global-loading-wrapper[data-v-be07bb24]{position:relative;height:100%;width:100%}.global-loading[data-v-be07bb24]{position:absolute;top:45%;left:50%;height:%?135?%;width:%?135?%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.global-loading[data-v-be07bb24]:before,\r\n.global-loading[data-v-be07bb24]:after{content:"";display:inline-block;position:absolute;top:0;left:0;height:%?135?%;width:%?135?%;box-sizing:border-box}@-webkit-keyframes globalLoadingRotate-data-v-be07bb24{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes globalLoadingRotate-data-v-be07bb24{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.global-loading[data-v-be07bb24]:before{border:%?4?% solid #f7f7f7;border-right-color:#8cc7b5;border-radius:100%;-webkit-animation:globalLoadingRotate-data-v-be07bb24 linear 1.5s infinite;animation:globalLoadingRotate-data-v-be07bb24 linear 1.5s infinite}.global-loading[data-v-be07bb24]:after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFmklEQVR4Xu1bXWwUVRg93+xCWyMokWpiUkQFAvGPGJSdbYg0Iamd2RqtIVFREzSaGMhG6SygiRb0AWVnCyFiJAbE+ECEqJHdWQJGywPd2Qr4QNAgxqgUnzSkgFrAcj8z/MT+7czdaQdZOvO499xzzj33m7l3d+4SxvhFY3z8CAMIK2CMJxDeAn4LYO2B/J3VfTibjGnH/XKMRr8N3+Zrz51DrRHTvvfDV3YFZIrWEmYsBTDzgiCRTcD21pi23o8Bv30yxazGrLwOIHbRBn3HgrNGXH+1HM6yAjBti0uSM7YZcf2pcsT9YtN2ziKQVqq/oerS45IGmgVrDQgrXU2TMs+INe3zOzCZfqa9qwUQn7phibC0NaZvlOGTD8C2DgG4x4N0q6Hqi2WE/WLMQn4TiF/06H/EUPVZMhpSAayxd00dB/GzBOEvhqrfLoHzDTHt3I8ATfMiEONo2vI52k9eOKkA0nZ2PkHp8CJz2su5/2T4BmNcn0P9wAzRkFKb93pphAF4JeS0hxUQ3gLhMyB8CIarwFheBtsOHx4/4fSvPQBq3FcN2muoWoPMyuIXY9pWHkCTR/8z4yfTjcnp2lkvHal9gENiFqwcCLobIQuxOlXfvMpLdCTt6c7sKlKUNtfvAqDPW1WtRUZHOgCJvcBpQ9UnyoiOFGPa+V6Aq0vycHSWEW88IqMjHYBDlumyEixoE8C3DiAnHMV55Wmjvmm/jOhIMZkua8YlH/MHcZ0E8WtGLPGerEZZATik7+zbNyESObmIgXoCThHz3tZ4Yoes4Gji0p25J0iheQzUgnl3VbWyM3m/9ns5GmUHUA55JWDDACphloL0GFZAkOlWAndYAZUwS0F6DCsgyHQrgTusgEqYpSA9hhUQZLqVwB1WQCXMUpAeh62Aiz870SJAOQ7BW4x6/eMgTQTFbXZaz7CCZgJOCqBzuapvHaw1JIBMMb+OmV/uD2Tmt1LxxBtBGQ2CN13IvUlEzgmS/tdaQ9VX9P9gSACmbTmvwacONsVMZiqupYIwO9qc6UI+TcTGkDEAx1OqXucaQKaYP8zMdw1rirHRiOvO+aCr9jIL1rsgLCllcPDr+yEV4PmzM9EWI6Y9fzUmYBbzm8H8nIu39w1Vf8m1ApxG07a+BLCgJBFhG6Iiacxp/uNqCMI8kJ2MPmUDGE+W9kPZ02dqWlY3NPR5BnAhhKL1AxgzXAZ4lCHMlNr8wf8ZQtrOvkBQnPvdzesJhSPTl8UfPuG5CvQHeL6AAMCgvELCbI0lpI7QjFZYmWKuQbBiELjkcbnLWqycvyM195Fhzzh57gRN2yoCmOtlnIANiETN1gcbu72wI2nPfLO7Duf7DAaSMjwMxFKq3lUK6xnApWdCO4BXvAXJKbE9LHgPro9uT93X+Jd3H29Ee6FQwziREKAEEekA3+TdC4dYiT6amtvoerpNKgBH7OLqEFnh+k5uoKteYuxh4BMjrm+TMDwEYtq5FgI9JoAWAq6T5iDawjWRpMwESAfgiLd3WXOYsZIZj0ub+Q/YTcAxBncDdIyZuhWiY06zYJ5CxHUATyFQHQNTAAzYsMjp0X6A3jbUps/k8PD3j5H2orVYMJzt8r2yQgHjTrEQ66pujqyRORMgtQx6GW7r+LB6YlXtUiZydoa3eeGDaidgMxO1X7Hj8oMHsr74xS3/iOizRFgI4IGgBjpw1uhPJs5C8EdGPLF7JJplPQO8hDLFXRqzWMgMnQi1Xvgy23sBOEdfdyosssvizb+V2X9Y+KgGcFmhraMjekPV3wsE0QIifogZswFEfRg+COArMH89XlHsZEw75YPDtUsgAQynmO7M3Y0IZoOVmQSeBMYkJkxSnN0kUQ+Ye0DoAdhZtw8asYQz+MCvKxZA4CPxKRAG4DO4a6ZbWAHXzFT6HMiYr4B/AXKuDF/iL7LlAAAAAElFTkSuQmCC") 50%/%?64?% %?64?% no-repeat}',""]),t.exports=e},"25bd":function(t,e,i){"use strict";i.r(e);var a=i("d30a"),o=i("54ac");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("5c7b");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"4ab368b7",null,!1,a["a"],r);e["default"]=c.exports},"286f":function(t,e,i){var a=i("d4ee");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("7c5747a8",a,!0,{sourceMap:!1,shadowMode:!1})},"28a0":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"global-loading-container global-loading-mask"},[i("v-uni-view",{staticClass:"global-loading-wrapper"},[i("v-uni-view",{staticClass:"global-loading"})],1)],1)},n=[]},"374b":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.url,expression:"url"}],staticClass:"cropper"},[i("v-uni-canvas",{style:{width:t.target.width+"px",height:t.target.height+"px"},attrs:{"canvas-id":"target"}}),i("v-uni-view",{staticClass:"body"},[t.url?i("v-uni-image",{staticClass:"image",style:{left:t.image.left+"px",top:t.image.top+"px",width:t.image.width+"px",height:t.image.height+"px"},attrs:{src:t.url},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.imageLoad.apply(void 0,arguments)}}}):t._e(),t.mask.show?i("v-uni-view",{staticClass:"mask"}):t._e(),i("v-uni-view",{staticClass:"plank",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"plank")},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.touchCancel.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"frame",style:{left:t.frame.left+"px",top:t.frame.top+"px",width:t.frame.width+"px",height:t.frame.height+"px"},on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"frame")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}},[t.mask.show?i("v-uni-canvas",{staticClass:"canvas",style:{width:t.frame.width+"px",height:t.frame.height+"px"},attrs:{"canvas-id":"canvas"}}):t._e(),i("v-uni-view",{staticClass:"rect"}),i("v-uni-view",{staticClass:"line-one"}),i("v-uni-view",{staticClass:"line-two"}),i("v-uni-view",{staticClass:"line-three"}),i("v-uni-view",{staticClass:"line-four"}),i("v-uni-view",{staticClass:"frame-left",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-left-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left-top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-left-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"left-bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right-top",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right-top")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}}),i("v-uni-view",{staticClass:"frame-right-bottom",on:{touchstart:[function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart(e,"right-bottom")},function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchHandle.apply(void 0,arguments)}]}})],1)],1)],1),i("v-uni-view",{staticClass:"toolbar"},[i("v-uni-button",{staticClass:"btn-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"btn-ok",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},n=[]},"3a65":function(t,e,i){"use strict";var a=i("0699"),o=i.n(a);o.a},"471e":function(t,e,i){"use strict";i.r(e);var a=i("28a0"),o=i("f3bc");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("3a65");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"be07bb24",null,!1,a["a"],r);e["default"]=c.exports},5006:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var a={imageCropper:i("25bd").default,iconfont:i("db8f").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"list"},[t.user.openid?i("v-uni-view",{staticClass:"item photo-item"},[i("v-uni-view",{staticClass:"name"},[t.user.openid?i("v-uni-image",{staticClass:"avatar",attrs:{src:t.user.avatar_url}}):t._e()],1),i("v-uni-view",{staticClass:"value"},[i("v-uni-view",{staticClass:"nickname"},[t._v(t._s(t.user.nickname))])],1)],1):i("v-uni-view",{staticClass:"item photo-item"},[i("v-uni-view",{staticClass:"name"},[i("imageCropper",{attrs:{fixed:!0,url:t.tempFilePath,width:200,height:200},on:{ok:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}}),i("v-uni-image",{attrs:{src:t.cropFilePath,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"value",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"tip"},[t._v("修改头像")])],1),i("v-uni-view",{staticClass:"go"},[i("iconfont",{attrs:{type:"go"}})],1)],1),t.user.openid?t._e():i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"name"},[t._v("昵称")]),i("v-uni-view",{staticClass:"value"},[t._v(t._s(t.user.nickname))])],1),t.user.mobile?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"name"},[t._v("手机号码")]),i("v-uni-view",{staticClass:"value"},[t._v(t._s(t.user.mobile))])],1):t._e(),t.user.openid?t._e():i("v-uni-navigator",{staticClass:"item",attrs:{url:"password","hover-class":"none"}},[i("v-uni-view",{staticClass:"name"},[t._v("修改密码")]),i("v-uni-text",{staticClass:"value"}),i("v-uni-view",{staticClass:"go"},[i("iconfont",{attrs:{type:"go"}})],1)],1),t.user.mobile?t._e():i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"name"},[t._v("手机号码")]),i("v-uni-view",{staticClass:"value"},[i("v-uni-input",{attrs:{placeholder:"请输入手机号码",type:"number",maxlength:"11"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1)],1),t.user.mobile?t._e():i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"name"},[t._v("短信验证码")]),i("v-uni-input",{staticClass:"input",attrs:{"placeholder-class":"tip",type:"text",maxlength:"4",placeholder:"请输入验证码"},model:{value:t.user.verify_code,callback:function(e){t.$set(t.user,"verify_code",e)},expression:"user.verify_code"}}),i("v-uni-view",{staticClass:"btn-verify",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getVerifyCode()}}},[t._v(t._s(t.verify_text))])],1)],1),i("v-uni-view",{staticClass:"submit"},[i("v-uni-view",{staticClass:"button",attrs:{"hover-class":"button-hover"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit()}}},[t._v("保存")]),i("v-uni-view",{staticClass:"btn-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout()}}},[t._v("退出登录")])],1)],1),t.showPageLoading?i("pageLoading"):t._e()],1)},n=[]},"54ac":function(t,e,i){"use strict";i.r(e);var a=i("9b0f"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"5c7b":function(t,e,i){"use strict";var a=i("a500"),o=i.n(a);o.a},"667e":function(t,e,i){"use strict";i.r(e);var a=i("8e72"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"6a59":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.cropper[data-v-6a7b551e]{position:fixed;width:100%;height:100%;top:0;left:0;z-index:997}.toolbar[data-v-6a7b551e]{position:absolute;width:100%;height:%?120?%;left:%?0?%;bottom:%?0?%;box-sizing:border-box;background:#000}.btn-cancel[data-v-6a7b551e]{position:absolute;left:%?100?%;top:%?12?%;font-size:%?30?%;padding:0 %?80?%;color:#353535;border-radius:%?150?%;background:#fff;height:%?70?%;line-height:%?70?%}.btn-ok[data-v-6a7b551e]{position:absolute;right:%?100?%;top:%?12?%;font-size:%?30?%;padding:0 %?80?%;color:#fff;border-radius:%?150?%;background:#099e55;height:%?70?%;line-height:%?70?%}.body[data-v-6a7b551e]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?120?%;background:#000;overflow:hidden}.mask[data-v-6a7b551e]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?0?%;background:#000;opacity:.4}.plank[data-v-6a7b551e]{position:absolute;left:%?0?%;right:%?0?%;top:%?0?%;bottom:%?0?%}.image[data-v-6a7b551e]{position:absolute}.frame[data-v-6a7b551e]{position:absolute}.canvas[data-v-6a7b551e]{position:absolute;display:block;left:0;top:0}.rect[data-v-6a7b551e]{position:absolute;left:-2px;top:-2px;width:100%;height:100%;border:2px solid #fff}.line-one[data-v-6a7b551e]{position:absolute;width:100%;height:1px;background:#fff;left:0;top:33.3%}.line-two[data-v-6a7b551e]{position:absolute;width:100%;height:1px;background:#fff;left:0;top:66.7%}.line-three[data-v-6a7b551e]{position:absolute;width:1px;height:100%;background:#fff;top:0;left:33.3%}.line-four[data-v-6a7b551e]{position:absolute;width:1px;height:100%;background:#fff;top:0;left:66.7%}.frame-left[data-v-6a7b551e]{position:absolute;height:100%;width:8px;left:-4px;top:0}.frame-right[data-v-6a7b551e]{position:absolute;height:100%;width:8px;right:-4px;top:0}.frame-top[data-v-6a7b551e]{position:absolute;width:100%;height:8px;top:-4px;left:0}.frame-bottom[data-v-6a7b551e]{position:absolute;width:100%;height:8px;bottom:-4px;left:0}.frame-left-top[data-v-6a7b551e]{position:absolute;width:20px;height:20px;left:-6px;top:-6px;border-left:4px solid red;border-top:4px solid red}.frame-left-bottom[data-v-6a7b551e]{position:absolute;width:20px;height:20px;left:-6px;bottom:-6px;border-left:4px solid red;border-bottom:4px solid red}.frame-right-top[data-v-6a7b551e]{position:absolute;width:20px;height:20px;right:-6px;top:-6px;border-right:4px solid red;border-top:4px solid red}.frame-right-bottom[data-v-6a7b551e]{position:absolute;width:20px;height:20px;right:-6px;bottom:-6px;border-right:4px solid red;border-bottom:4px solid red}',""]),t.exports=e},"75ae":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@font-face{font-family:iconfont;src:url("data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAR4AAsAAAAACKgAAAQsAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDBgqEfIRGATYCJAMMCwgABCAFhG0HShugB8gOJUHBwAAAAAFEBNmwzd4dtatSmmpFoVAEhUThEAYkCozFKDCqCVO6RfH/89v869awDnTR1qrSANFt4GG4SNxreBn91fmV9f3+53J613ieHba+N1zmGM8PA7oXTaCAxpjei8IoLWFsGLu4jPME6vWJJdovqmgAO4U2LRBnep0K7GJmpYQWanXVOWuLuAFrtenK4haAa/f38QnKsCOpyrRFh6eFWsh5KXnfYcn958BGQNKfE8wmMmaAQpzkuo9Z+ukZluoltVV5abUipL5i/ysArlhWVut/eCRBVNPUjYg6oUo7JTHFoaYDSvdacnKTq9GAB4AY5y2dtL3qpFh1DENdnJC6Hq+xYb7pyRMDMzc/fYoJjY8flwO3m98rMucF+IZHj6Cagw5UeKpxyFbt2rHGY/8jpa7CYMvLfcIesLjY3bdqhaf+nqgQs2qT/+rjCH/VfA0VFGuAC3iE8NEr/Vau8vZsXiUy7+V3c3tQQXMAuNjDCC89KDIHH0OFhnUi81GEPwyc7wZUaN7DnUf4g+ZLQsMKYV/94NjK7R7TEM4niTY1oJ5zEU62aNVaasUub08YLUEam5EnT6a61/I17dNk+vTu9jpJjXhsTFwjqTtpCBxBIIgS6iQnc/Zod1YGKp0rAwsD8kkyP6AwcK0hcAwkiQmBhWvxPZWKDu86aUH2nLEdi9rGX1eXq5P6A1SrnAucMVMdZH/GKi/jyfCqJyucfK3mXpVujXOPfFf5LC4Dvx0X/943JyOq4HuCTZ8KiIPPAb6ro8akpT6ufiq39BQrNlk5mp8pO0JlJLk8f5QalRjoP60IMx0N8n7wGhSD3n6/F1zlcTVz/cR+Ev0lkLSTd7UiPbD/wCxGRMA2Krwro2O0bTQtImbwhjAJc0S3N4ROx15/PH60IzaIOjCbEelqkDOfETNxb/FMixnWNzeJp2KPQw9A5d76jGUOQOUvH7RE/o2RfkNatd3OGf9q0QKbnq8WB7qy+hVqJRjJn1BQgP/iErks0yy5iGJTrOayW7C/z0IoZH0qNH+7N+31XXc7G2p1hZDU6IWs1ghaqDNQpcEKVKu1BfWmFW9u0IFhKUodpswCEFodgqTZHWStbqOF+hqqdPsG1VrDEuodhfueDcZCj+QzuIrFtZh6BNNraIowbCzi1dbhOlOfionKXHoTzgzoY5hCKk/minEKZ/pYMDCoU7IsgREM3Y8Vgcvwvj4aMzK0AdewUpJljWkyGZH3IKmG7gfEHgZOhYXTwqiNwOhp0CiE3ZiFpL5fB6dj0keFKcGV+JvgGAP0vWMUpOQ10GI1VQt3LoMHDNJRYrEIPInAoPXDFEEnrk9P0zDG/FEGOA2WFNkiaZRGhuoRddXS8bX917cL6mn9c6TIUXSekybKHKQfJXFq2KSiRklLYU8dNKWDIX0cAA==") format("woff2")}.vue-cropper[data-v-4ab368b7]{position:fixed;left:0;right:0;bottom:0;z-index:998;box-sizing:border-box;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;direction:ltr;touch-action:none;text-align:left;\n      /* background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC");\n\t */background:#000}.cropper-canvas[data-v-4ab368b7]{position:absolute;top:-9999px;left:-9999px;z-index:-998}.vue-cropper .uni-info__ft[data-v-4ab368b7]{position:absolute;height:%?90?%;font-size:%?32?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;bottom:0;left:0;right:0;z-index:998;background:#fff}.vue-cropper .uni-info__ft .uni-modal__btn[data-v-4ab368b7]{height:%?90?%;line-height:%?90?%}.btn-group[data-v-4ab368b7]{position:absolute;right:30px;bottom:78px;z-index:998}.btn-item[data-v-4ab368b7]{position:relative;width:40px;height:40px;background:#fff;border-radius:20px;padding:10px;display:inline-block;margin-left:10px;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.btn-item[data-v-4ab368b7]:active{background:#ccc}.rotate-btn[data-v-4ab368b7]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.rotate-btn[data-v-4ab368b7]:before{content:"\\e65c";margin-left:-2px}.reset-btn[data-v-4ab368b7]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.reset-btn[data-v-4ab368b7]:before{content:"\\e648";margin-left:-2px}.vue-cropper .uni-info__ft[data-v-4ab368b7]:after{content:" ";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #d5d5d6;color:#d5d5d6;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);z-index:998}.vue-cropper .uni-modal__btn[data-v-4ab368b7]{display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#3cc51f;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative;text-align:center;background-color:#fff;z-index:998;font-size:%?32?%}.vue-cropper .uni-modal__btn[data-v-4ab368b7]:first-child:after{display:none}.vue-cropper .uni-modal__btn[data-v-4ab368b7]:after{content:" ";position:absolute;left:0;top:0;width:1px;bottom:0;border-left:1px solid #d5d5d6;color:#d5d5d6;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleX(.5);transform:scaleX(.5);z-index:998}.vue-cropper .uni-modal__btn[data-v-4ab368b7]:active{background-color:#eee}.cropper-box[data-v-4ab368b7],\n  .cropper-box-canvas[data-v-4ab368b7],\n  .cropper-drag-box[data-v-4ab368b7],\n  .cropper-crop-box[data-v-4ab368b7],\n  .cropper-face[data-v-4ab368b7]{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-user-select:none;user-select:none;z-index:998}.cropper-box[data-v-4ab368b7]{\n\t\t/* background: #000; */}.uni-image[data-v-4ab368b7]{width:100%;height:100%}.cropper-box-canvas uni-image[data-v-4ab368b7]{position:relative;text-align:left;-webkit-user-select:none;user-select:none;-webkit-transform:none;transform:none;max-width:none;max-height:none;z-index:998}.cropper-box[data-v-4ab368b7]{overflow:hidden}.cropper-move[data-v-4ab368b7]{cursor:move}.cropper-crop[data-v-4ab368b7]{cursor:crosshair}.cropper-modal[data-v-4ab368b7]{background:rgba(0,0,0,.5)}.pointer-events[data-v-4ab368b7]{pointer-events:none}.cropper-crop-box[data-v-4ab368b7]{\n      /*border: 2px solid #39f;*/}.cropper-view-box[data-v-4ab368b7]{display:block;overflow:hidden;width:100%;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);-webkit-user-select:none;user-select:none}.cropper-view-box uni-image[data-v-4ab368b7]{-webkit-user-select:none;user-select:none;text-align:left;max-width:none;max-height:none}.cropper-face[data-v-4ab368b7]{top:0;left:0;background-color:#fff;opacity:.1}.crop-line[data-v-4ab368b7]{position:absolute;display:block;width:100%;height:100%;opacity:.1;z-index:998}.line-w[data-v-4ab368b7]{top:-3px;left:0;height:5px;cursor:n-resize}.line-a[data-v-4ab368b7]{top:0;left:-3px;width:5px;cursor:w-resize}.line-s[data-v-4ab368b7]{bottom:-3px;left:0;height:5px;cursor:s-resize}.line-d[data-v-4ab368b7]{top:0;right:-3px;width:5px;cursor:e-resize}.crop-point[data-v-4ab368b7]{position:absolute;width:8px;height:8px;opacity:.75;background-color:#39f;border-radius:100%;z-index:998}.point-lt[data-v-4ab368b7]{top:-4px;left:-4px;cursor:nw-resize}.point-mt[data-v-4ab368b7]{top:-5px;left:50%;margin-left:-3px;cursor:n-resize}.point-rt[data-v-4ab368b7]{top:-4px;right:-4px;cursor:ne-resize}.point-ml[data-v-4ab368b7]{top:50%;left:-4px;margin-top:-3px;cursor:w-resize}.point-mr[data-v-4ab368b7]{top:50%;right:-4px;margin-top:-3px;cursor:e-resize}.point-lb[data-v-4ab368b7]{bottom:-5px;left:-4px;cursor:sw-resize}.point-mb[data-v-4ab368b7]{bottom:-5px;left:50%;margin-left:-3px;cursor:s-resize}.point-rb[data-v-4ab368b7]{bottom:-5px;right:-4px;cursor:se-resize}',""]),t.exports=e},"7cdf":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{class:"icon iconfont icon-"+t.type})},n=[]},"7eb8":function(t,e,i){"use strict";i.r(e);var a=i("f0d1"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},"83ea":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"pageLoading"};e.default=a},"8e72":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(i("0315"));var o,n=a(i("0dd3")),r=a(i("471e")),s=a(i("db8f")),c=a(i("15f2")),l={components:{pageLoading:r.default,iconfont:s.default,imageCropper:c.default},data:function(){return{mobile:"",second:0,tempFilePath:"",cropFilePath:"",user:{},showPageLoading:!0}},onShow:function(){this.$initPageTitle();var t=uni.getStorageSync("source");"login"==t&&(uni.removeStorageSync("source"),uni.navigateTo({url:"/pages/user/index"}))},onLoad:function(t){this.loadData()},computed:{verify_text:function(){return 0==this.second?"获取验证码":this.second<10?"0"+this.second+"秒后重新获取":this.second+"秒后重新获取"}},onPullDownRefresh:function(){uni.showLoading({title:"刷新中"}),this.loadData()},methods:{loadData:function(){this.getData()},getData:function(){var t=this;this.$app.request({url:this.$api.user.userInfo,data:{},method:"POST",dataType:"json",success:function(e){0==e.code?(console.log(t.user),t.user=e.data,t.mobile=t.user.mobile,t.cropFilePath=t.user.avatar_url,t.showPageLoading=!1):t.$alert(e.msg)},complete:function(t){uni.stopPullDownRefresh(),uni.hideLoading()}})},upload:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){t.tempFilePath=e.tempFilePaths.shift()}})},confirm:function(t){var e=this;this.tempFilePath="",this.cropFilePath=t.path,this.$loading("图片上传…"),this.$app.uploadFile({url:this.$api.user.upload,filePath:t.path,name:"file",formData:{},success:function(t){console.log(t),console.log(t.code),0==t.code&&(e.user.avatar_id=t.data.id,e.user.avatar_url=t.data.url,e.cropFilePath=t.data.url),uni.hideLoading()}})},cancel:function(){this.tempFilePath=""},getVerifyCode:function(){var t=this;this.second>0||n.default.checkMobile(this.user.mobile)&&(this.second=60,o=setInterval((function(){t.second--,0==t.second&&clearInterval(o)}),1e3),this.$app.request({url:this.$api.user.verifyCode,data:{mobile:mobile,type:"userSetting"},method:"POST",dataType:"json",success:function(e){0!=e.code&&t.$alert(e.msg,"warning")}}))},uploadPhoto:function(){var t=this;uni.chooseImage({success:function(e){var i=e.tempFilePaths;uni.showLoading({title:"上传中…"}),console.log(i[0]),t.$app.uploadFile({url:t.$api.user.upload,filePath:i[0],name:"file",formData:{},success:function(e){console.log(e),console.log(e.code),0==e.code&&(t.user.avatar_id=e.data.id,t.user.avatar_url=e.data.url),uni.hideLoading()}})}})},submit:function(){var t=this;if(!this.mobile&&!this.user.verify_code)return this.$alert("请输入短信验证码","warning"),!1;uni.showLoading({title:"提交中…"});var e={mobile:this.mobile};this.user.avatar_url&&(e.avatar_url=this.user.avatar_url),this.user.verify_code&&(e.verify_code=this.user.verify_code),this.$app.request({url:this.$api.user.setting,data:e,method:"POST",dataType:"json",success:function(e){0==e.code?t.$alert("保存成功","success"):t.$alert(e.msg,"warning")},complete:function(t){uni.hideLoading()}})},logout:function(){var t=this;uni.showModal({title:"提示",content:"确认退出登录？",confirmText:"是",cancelText:"否",success:function(e){e.confirm&&t.$app.request({url:t.$api.user.logout,method:"POST",success:function(e){0==e.code?(uni.removeStorageSync("isLogin"),uni.removeStorageSync("accessToken"),uni.removeStorageSync("currentUser"),uni.removeStorageSync("platform"),uni.setStorageSync("source","logout"),t.$alert("退出登录成功","success","/pages/user/index")):t.$alert(e.msg,"warning")},complete:function(){uni.hideLoading()}})}})}}};e.default=l},9268:function(t,e,i){"use strict";i.r(e);var a=i("5006"),o=i("667e");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("98a8");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"7f2aee02",null,!1,a["a"],r);e["default"]=c.exports},"98a8":function(t,e,i){"use strict";var a=i("286f"),o=i.n(a);o.a},"9b0f":function(t,e,i){"use strict";i("a9e3"),i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"image-cropper",props:{cropWidth:{type:Number,default:200},cropHeight:{type:Number,default:200},cropFixed:{type:Boolean,default:!1},src:{type:String},showResetBtn:{type:Boolean,default:!0},showRotateBtn:{type:Boolean,default:!0}},data:function(){var t=uni.getSystemInfoSync(),e=t.pixelRatio;return{show:!1,scale:1,rotate:0,cropW:0,cropH:0,cropOldW:0,cropOldH:0,sysInfo:t,pixelRatio:e,imageRealWidth:0,imageRealHeight:0,cropOffsertX:0,cropOffsertY:0,startX:0,startY:0,border:5,x:0,y:0,startL:0,oldScale:1}},watch:{src:function(t){t.length>0&&this.init()},show:function(t){t||(this.src="")}},computed:{containerTop:function(){var t=0;return t=44,t},containerHeight:function(){return this.windowHeight-48},windowWidth:function(){return this.sysInfo.windowWidth},windowHeight:function(){return this.sysInfo.windowHeight},imageRatio:function(){return this.imageRealHeight>0?this.imageRealWidth/this.imageRealHeight:0},imageWidth:function(){return this.imageRatio>=1?this.windowWidth:this.windowWidth*this.imageRatio},imageHeight:function(){return this.imageRatio>=1?this.windowWidth/this.imageRatio:this.windowWidth}},methods:{rotateHandler:function(){3==this.rotate?this.rotate=0:++this.rotate},init:function(){this.rotate=0,this.scale=1,this.cropW=this.cropWidth,this.cropH=this.cropHeight,uni.showLoading({title:"图片加载中..."}),this.loadImage(this.src).then((function(t){uni.hideLoading()})).catch((function(t){uni.hideLoading(),uni.showModal({title:"标题",content:"图片加载失败"})}))},loadImage:function(t){var e=this;return new Promise((function(i,a){uni.getImageInfo({src:t,success:function(t){e.imageRealWidth=t.width,e.imageRealHeight=t.height,e.cropOffsertX=e.windowWidth/2-e.cropW/2,e.cropOffsertY=e.windowHeight/2-e.cropH/2,e.show=!0,e.$nextTick((function(){e.x=e.windowWidth/2-e.imageWidth/2,e.y=e.containerHeight/2-e.imageHeight/2})),i(t)},fail:function(t){e.show=!1,a(t)}})}))},cancel:function(){this.show=!1,this.$emit("cancel")},confirm:function(t){uni.showLoading({title:"裁剪中..."});var e=this,i=uni.createCanvasContext("myCanvas",e),a=e.pixelRatio,o=e.src,n=e.imageWidth*e.scale,r=e.imageHeight*e.scale,s=e.rotate,c=e.cropOffsertX-e.x-(e.imageWidth-n)/2,l=e.cropOffsertY-e.y-(e.imageHeight-r)/2;switch(i.setFillStyle("white"),i.fillRect(0,0,n,r),i.save(),i.rotate(90*s*Math.PI/180),s){case 1:c+=(r-n)/2,l-=(r-n)/2,i.drawImage(o,-l,c,n,-r);break;case 2:i.drawImage(o,c,l,-n,-r);break;case 3:c+=(r-n)/2,l-=(r-n)/2,i.drawImage(o,l,-c,-n,r);break;default:i.drawImage(o,-c,-l,n,r);break}i.restore(),i.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"myCanvas",destWidth:e.cropW*a,destHeight:e.cropH*a,success:function(i){console.log(i),uni.hideLoading(),t.detail.tempFilePath=i.tempFilePath,e.show=!1,e.$emit("confirm",t)},fail:function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"裁剪失败"})}},e)}))},imgTouchStart:function(t){if(2==t.touches.length){this.oldScale=this.scale,this.scaling=!0;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));this.startL=Math.max(e,i,a),uni.showModal({content:this.startL})}else this.startX=t.touches[0].pageX-this.x,this.startY=t.touches[0].pageY-this.y},imgMoveing:function(t){if(this.scaling){var e=this.oldScale,i=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),n=Math.max(i,a,o),r=n-this.startL,s=1;s=s/this.imageWidth>s/this.imageHeight?s/this.imageHeight:s/this.imageWidth,s=s>.1?.1:s;var c=s*r;r>0?e+=Math.abs(c):r<0&&e>Math.abs(c)&&(e-=Math.abs(c)),this.scale=e}else{var l=t.touches[0].pageX-this.startX,h=t.touches[0].pageY-this.startY;this.x=l,this.y=h}},imgMoveEnd:function(){var t=this;setTimeout((function(){t.scaling=!1}),100)},touchStart:function(t){this.startX=t.touches[0].pageX-this.cropOffsertX,this.startY=t.touches[0].pageY-this.cropOffsertY,this.cropOldW=this.cropW,this.cropOldH=this.cropH},cropMoveing:function(t){var e=this._cropX(t.touches[0].pageX-this.startX),i=this._cropY(t.touches[0].pageY-this.startY);this.cropOffsertX=e,this.cropOffsertY=i},dragMove:function(t,e){if(this.cropFixed)return!1;var i=t.touches[0].pageX-this.startX,a=t.touches[0].pageY-this.startY;switch(e){case"left-top":this._cropMoveLeft(i),this._cropMoveTop(a);break;case"middle-top":this._cropMoveTop(a);break;case"right-top":this._cropMoveTop(a),this._cropMoveRight(i);break;case"middle-right":this._cropMoveRight(i);break;case"right-bottom":this._cropMoveRight(i),this._cropMoveBottom(a);break;case"middle-bottom":this._cropMoveBottom(a);break;case"left-bottom":this._cropMoveBottom(a),this._cropMoveLeft(i);break;case"middle-left":this._cropMoveLeft(i);break;default:break}},_cropMoveTop:function(t){var e=this._cropY(t);this.cropH+=this.cropOffsertY-e,this.cropOffsertY=e},_cropMoveRight:function(t){if(this.cropOldW+t>=this.windowWidth-this.border)return!1;this.cropW=this.cropOldW+(t-this.cropOffsertX)},_cropMoveBottom:function(t){if(this.cropOldH+t>=this.windowHeight-this.containerTop-this.border)return!1;this.cropH=this.cropOldH+(t-this.cropOffsertY)},_cropMoveLeft:function(t){var e=this._cropY(t);this.cropW+=this.cropOffsertX-e,this.cropOffsertX=e},_cropX:function(t){return t<=this.border?this.border:t+this.cropW>=this.windowWidth-this.border?this.windowWidth-this.cropW-this.border:t},_cropY:function(t){return t<=this.border?this.border:t+this.cropH>=this.windowHeight-this.containerTop-this.border?this.windowHeight-this.cropH-this.containerTop-this.border:t}}};e.default=a},a500:function(t,e,i){var a=i("75ae");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("f68158ec",a,!0,{sourceMap:!1,shadowMode:!1})},b363:function(t,e,i){var a=i("6a59");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("6ba82d92",a,!0,{sourceMap:!1,shadowMode:!1})},d30a:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"cropper",staticClass:"vue-cropper",style:{top:t.containerTop+"px"}},[i("v-uni-view",{staticClass:"cropper-box"},[i("v-uni-view",{staticClass:"cropper-box-canvas",style:{width:t.imageWidth+"px",height:t.imageHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+t.x/t.scale+"px,"+t.y/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgTouchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgMoveing.apply(void 0,arguments)},touchend:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgMoveEnd.apply(void 0,arguments)}}},[i("v-uni-image",{ref:"cropperImg",staticClass:"uni-image",attrs:{src:t.src,alt:"cropper-img",mode:"scaleToFill"}})],1)],1),i("v-uni-view",{staticClass:"cropper-drag-box cropper-modal cropper-move pointer-events"}),i("v-uni-view",{staticClass:"cropper-crop-box",class:{"pointer-events":t.cropFixed},style:{width:t.cropW+"px",height:t.cropH+"px",transform:"translate3d("+t.cropOffsertX+"px,"+t.cropOffsertY+"px,0)"}},[i("v-uni-view",{staticClass:"cropper-view-box"},[i("v-uni-image",{style:{width:t.imageWidth+"px",height:t.imageHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+(t.x-t.cropOffsertX)/t.scale+"px,"+(t.y-t.cropOffsertY)/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},attrs:{mode:"scaleToFill",src:t.src,alt:"cropper-img"}})],1),t.cropFixed?t._e():i("v-uni-view",{staticClass:"cropper-face cropper-move",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.cropMoveing.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"crop-line line-w"}),i("v-uni-view",{staticClass:"crop-line line-a"}),i("v-uni-view",{staticClass:"crop-line line-s"}),i("v-uni-view",{staticClass:"crop-line line-d"}),t.cropFixed?t._e():[i("v-uni-view",{staticClass:"crop-point point-lt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"left-top")}}}),i("v-uni-view",{staticClass:"crop-point point-mt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-top")}}}),i("v-uni-view",{staticClass:"crop-point point-rt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"right-top")}}}),i("v-uni-view",{staticClass:"crop-point point-ml",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-left")}}}),i("v-uni-view",{staticClass:"crop-point point-mr",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-right")}}}),i("v-uni-view",{staticClass:"crop-point point-lb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"left-bottom")}}}),i("v-uni-view",{staticClass:"crop-point point-mb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-bottom")}}}),i("v-uni-view",{staticClass:"crop-point point-rb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"right-bottom")}}})]],2),i("v-uni-canvas",{staticClass:"cropper-canvas",style:{width:t.cropW+"px",height:t.cropH+"px"},attrs:{"canvas-id":"myCanvas"}}),i("v-uni-view",{staticClass:"btn-group"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showResetBtn,expression:"showResetBtn"}],staticClass:"btn-item reset-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.init.apply(void 0,arguments)}}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showRotateBtn,expression:"showRotateBtn"}],staticClass:"btn-item rotate-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rotateHandler.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"uni-info__ft"},[i("v-uni-view",{staticClass:"uni-modal__btn uni-modal__btn_default",staticStyle:{color:"rgb(0, 0, 0)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{staticClass:"uni-modal__btn uni-modal__btn_primary",staticStyle:{color:"rgb(0, 122, 255)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},n=[]},d4ee:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.list[data-v-7f2aee02]{margin-top:%?2?%;padding-left:%?24?%;padding-right:%?24?%;border-bottom:%?1?% solid #eee;background:#fff}.list .item[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;min-height:%?76?%;border-top:%?1?% solid #eee;padding:%?10?% 0}.list .item[data-v-7f2aee02]:first-child{border:0}.list .item .name[data-v-7f2aee02]{-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%;width:%?200?%;color:#555}.list .item .name[data-v-7f2aee02] .icon{color:#0b88ff;margin-right:%?10?%}.list .item .name[data-v-7f2aee02] .icon-mobile-01{font-size:%?38?%;margin-right:%?5?%;margin-left:%?-5?%}.list .item .name[data-v-7f2aee02] .icon-policy-file{font-size:%?30?%;margin-right:%?14?%;margin-left:%?-2?%;margin-top:%?2?%}.list .item .name uni-text[data-v-7f2aee02]{color:#555}.list .item .value[data-v-7f2aee02]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;-webkit-flex-shrink:1;flex-shrink:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?30?%;width:100%;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;text-align:left}.list .item .value[data-v-7f2aee02] .icon{margin-left:%?20?%;font-size:%?20?%;color:#c1c4c9}.list .item .value uni-input[data-v-7f2aee02]{padding-right:%?30?%;font-size:%?30?%;width:100%}.list .item .value uni-image[data-v-7f2aee02]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?10?%}.list .item .value uni-text[data-v-7f2aee02]{margin-right:%?15?%;text-align:left;line-height:normal;padding:%?10?% 0 %?10?% 0}.list .item .value .nickname[data-v-7f2aee02]{font-size:%?30?%}.list .item .btn-verify[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border:%?1?% solid #848c98;background:#fff;height:%?46?%;line-height:%?46?%;padding:0 %?20?%;border-radius:%?55?%;font-size:%?26?%;color:#999;width:%?220?%}.list .item .tip[data-v-7f2aee02]{font-size:%?30?%;margin-right:%?15?%;color:grey}.list .item .go[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.list .item .go[data-v-7f2aee02] .icon{color:#ddd;font-size:%?20?%}.list .item .location[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.list .item .location[data-v-7f2aee02] .icon{color:grey}.list .item .drive-type[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.list .item .drive-type .check-item[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-left:%?30?%}.list .item .drive-type .check-item[data-v-7f2aee02]:first-child{margin-left:0}.list .item .drive-type .check-item .check-name[data-v-7f2aee02]{font-size:%?30?%;line-height:normal}.list .photo-item[data-v-7f2aee02]{height:%?150?%}.list .photo-item uni-image[data-v-7f2aee02]{width:%?120?%;height:%?120?%;border-radius:50%}.list .textarea-item[data-v-7f2aee02]{padding-top:%?10?%;height:%?110?%;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.list .textarea-item .name[data-v-7f2aee02]{padding-top:%?10?%}.list .textarea-item .value uni-textarea[data-v-7f2aee02]{padding-top:%?12?%;height:%?100?%;font-size:%?30?%;word-wrap:break-word;width:%?524?%;line-height:1.5}.submit[data-v-7f2aee02]{padding:%?30?% 0 %?70?%;background:#fff}.submit .btn-text[data-v-7f2aee02]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:%?24?%;font-size:%?32?%;color:#8cc7b5}',""]),t.exports=e},d776:function(t,e,i){"use strict";i.r(e);var a=i("0465"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},db8f:function(t,e,i){"use strict";i.r(e);var a=i("7cdf"),o=i("d776");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=c.exports},f0d1:function(t,e,i){"use strict";i("ace4"),i("a9e3"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{url:{type:String,default:""},fixed:{type:Boolean,default:!1},width:{type:Number,default:200},height:{type:Number,default:200},maxWidth:{type:Number,default:1024},maxHeight:{type:Number,default:1024},blob:{type:Boolean,default:!1}},data:function(){return{mask:{show:!1},frame:{left:50,top:50,width:this.width/1.5,height:this.height/1.5},image:{left:20,top:20,width:300,height:400},real:{width:100,height:100},target:{width:this.width,height:this.height},touches:[],type:"",start:{frame:{left:0,top:0,width:0,height:0},image:{left:0,top:0,width:0,height:0}},timeoutId:-1,context:null}},mounted:function(){this.$el.addEventListener("touchmove",(function(t){t.preventDefault()})),this.context=uni.createCanvasContext("canvas",this),this.targetContext=uni.createCanvasContext("target",this)},methods:{imageLoad:function(t){var e=this;this.mask.show=!0,this.real.width=t.detail.width,this.real.height=t.detail.height,this.image.width=t.detail.width,this.image.height=t.detail.height,this.frame.width=this.width/1.5,this.frame.height=this.height/1.5,this.fixed||(this.frame.width=this.image.width,this.frame.height=this.image.height);var i=uni.createSelectorQuery().in(this);i.select(".body").boundingClientRect((function(t){var i=t.width,a=t.height,o=e.frame.width,n=e.frame.height,r=.8*i,s=.8*a,c=r/o,l=s/n,h=c;c<l&&(h=l),r=o*h,s=n*h;var u=(i-r)/2,d=(a-s)/2;e.frame.width=r,e.frame.height=s,e.frame.left=u,e.frame.top=d;var f=e.image.width,p=e.image.height;c=r/f,l=s/p,h=c,c<l&&(h=l),e.image.width=f*h,e.image.height=p*h,e.image.left=(i-e.image.width)/2,e.image.top=(a-e.image.height)/2,setTimeout((function(){e.trimImage()}),100)})).exec()},touchHandle:function(){},touchStart:function(t,e){this.stopTime(),this.mask.show=!1,0==this.touches.length&&(this.type=e,this.start.frame.left=this.frame.left,this.start.frame.top=this.frame.top,this.start.frame.width=this.frame.width,this.start.frame.height=this.frame.height,this.start.image.left=this.image.left,this.start.image.top=this.image.top,this.start.image.width=this.image.width,this.start.image.height=this.image.height);for(var i=t.changedTouches,a=0;a<i.length;a++){var o=i[a];this.touches.push(o)}},touchMove:function(t){this.stopTime(),t.preventDefault();var e=t.touches;if(1==this.touches.length)"plank"==this.type||"frame"==this.type||this.fixed?this.moveImage(this.touches[0],e[0]):this.scaleFrame(this.touches[0],e[0],this.type);else if(2==this.touches.length&&2==e.length){var i=this.touches[0],a=this.touches[1],o=e[0],n=e[1];if(i.identifier!=o.identifier){var r=o;o=n,n=r}this.scaleImage(i,a,o,n)}},touchEnd:function(t){this.type="",this.touches=[],this.startTime()},touchCancel:function(t){this.type="",this.touches=[],this.startTime()},startTime:function(){var t=this;this.stopTime(),this.timeoutId=setTimeout((function(){t.trimImage()}),800)},stopTime:function(){this.timeoutId>=0&&(clearTimeout(this.timeoutId),this.timeoutId=-1)},trimImage:function(){var t=this;this.mask.show=!0;var e=uni.createSelectorQuery().in(this);e.select(".body").boundingClientRect((function(e){var i=e.width,a=e.height,o=t.frame.width,n=t.frame.height,r=.8*i,s=.8*a,c=r/o,l=s/n,h=c;c>l&&(h=l),r=o*h,s=n*h;var u=(i-r)/2,d=(a-s)/2,f=u-t.frame.left+(t.frame.left-t.image.left)*(1-h),p=d-t.frame.top+(t.frame.top-t.image.top)*(1-h);t.frame.width=r,t.frame.height=s,t.frame.left=u,t.frame.top=d,t.image.width*=h,t.image.height*=h,t.image.left+=f,t.image.top+=p})).exec(),setTimeout((function(){var e=t.image.width/t.real.width,i=(t.frame.left-t.image.left)/e,a=(t.frame.top-t.image.top)/e,o=t.frame.width/e,n=t.frame.height/e;t.context.drawImage(t.url,i,a,o,n,0,0,t.frame.width,t.frame.height),t.context.draw(!1)}),100)},moveImage:function(t,e){var i=e.clientX-t.clientX,a=e.clientY-t.clientY;this.image.left=this.start.image.left+i,this.image.top=this.start.image.top+a,this.image.left>this.frame.left&&(this.image.left=this.frame.left),this.image.top>this.frame.top&&(this.image.top=this.frame.top),this.image.left+this.image.width<this.frame.left+this.frame.width&&(this.image.left=this.frame.left+this.frame.width-this.image.width),this.image.top+this.image.height<this.frame.top+this.frame.height&&(this.image.top=this.frame.top+this.frame.height-this.image.height)},scaleImage:function(t,e,i,a){var o=t.clientX,n=t.clientY,r=e.clientX,s=e.clientY,c=i.clientX,l=i.clientY,h=a.clientX,u=a.clientY,d=Math.sqrt((o-r)*(o-r)+(n-s)*(n-s)),f=Math.sqrt((c-h)*(c-h)+(l-u)*(l-u)),p=(o+r)/2,g=(n+s)/2,v=(c+h)/2,m=(l+u)/2,b=v-p,w=m-g,x=f/d;this.start.image.width*x<this.frame.width&&(x=this.frame.width/this.start.image.width),this.start.image.height*x<this.frame.height&&(x=this.frame.height/this.start.image.height),this.start.image.width*x<this.frame.width&&(x=this.frame.width/this.start.image.width),this.image.left=this.start.image.left+b-(p-this.start.image.left)*(x-1),this.image.top=this.start.image.top+w-(g-this.start.image.top)*(x-1),this.image.width=this.start.image.width*x,this.image.height=this.start.image.height*x,this.image.left>this.frame.left&&(this.image.left=this.frame.left),this.image.top>this.frame.top&&(this.image.top=this.frame.top),this.image.left+this.image.width<this.frame.left+this.frame.width&&(this.image.left=this.frame.left+this.frame.width-this.image.width),this.image.top+this.image.height<this.frame.top+this.frame.height&&(this.image.top=this.frame.top+this.frame.height-this.image.height)},scaleFrame:function(t,e,i){var a=e.clientX-t.clientX,o=e.clientY-t.clientY,n=this.start.frame.left,r=this.start.frame.top,s=this.start.frame.left+this.start.frame.width,c=this.start.frame.top+this.start.frame.height;"left"==i?n+=a:"right"==i?s+=a:"top"==i?r+=o:"bottom"==i?c+=o:"left-top"==i?(n+=a,r+=o):"left-bottom"==i?(n+=a,c+=o):"right-top"==i?(s+=a,r+=o):"right-bottom"==i&&(s+=a,c+=o),n<this.image.left&&(n=this.image.left),r<this.image.top&&(r=this.image.top),s>this.image.left+this.image.width&&(s=this.image.left+this.image.width),c>this.image.top+this.image.height&&(c=this.image.top+this.image.height),this.frame.left=n,this.frame.top=r,this.frame.width=s-n,this.frame.height=c-r},parseBlob:function(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],a=atob(e[1]),o=a.length,n=new Uint8Array(o),r=0;r<o;r++)n[r]=a.charCodeAt(r);var s=URL||webkitURL;return s.createObjectURL(new Blob([n],{type:i}))},confirm:function(){var t=this,e=this.image.width/this.real.width,i=(this.frame.left-this.image.left)/e,a=(this.frame.top-this.image.top)/e,o=this.frame.width/e,n=this.frame.height/e,r=o,s=n;if(this.fixed)r=this.width/1.5/2,s=this.height/1.5/2;else{if(r>this.maxWidth/2){var c=this.maxWidth/2/r;r*=c,s*=c}if(s>this.maxHeight/2){c=this.maxHeight/2/s;s*=c,r*=c}}this.target.width=r,this.target.height=s,uni.showLoading({title:"图片裁剪…"}),setTimeout((function(){t.targetContext.drawImage(t.url,i,a,o,n,0,0,r,s),t.targetContext.draw(!1,(function(){setTimeout((function(){uni.canvasToTempFilePath({canvasId:"target",success:function(e){var i=e.tempFilePath;t.blob&&(i=t.parseBlob(i)),t.$emit("ok",{path:i})},fail:function(t){console.log(t)},complete:function(){uni.hideLoading()}},t)}),200)}))}),200)},cancel:function(){this.$emit("cancel")}}};e.default=a},f3bc:function(t,e,i){"use strict";i.r(e);var a=i("83ea"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},f899:function(t,e,i){"use strict";var a=i("b363"),o=i.n(a);o.a}}]);